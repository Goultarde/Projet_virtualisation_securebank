<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infrastructure Finale - SecureBank</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            display: flex;
            align-items: center;
        }

        .section h3 {
            color: #34495e;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
            padding-left: 15px;
            border-left: 4px solid #3498db;
        }

        .section h4 {
            color: #2c3e50;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }

        .architecture-diagram {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            white-space: pre;
        }

        .service-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .service-card h4 {
            color: white;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .service-card ul {
            list-style: none;
            padding-left: 0;
        }

        .service-card li {
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .service-card li:last-child {
            border-bottom: none;
        }

        .config-block {
            background: #2c3e50;
            color: #ecf0f1;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
        }

        .flow-diagram {
            background: #ecf0f1;
            border: 2px solid #bdc3c7;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            text-align: center;
        }

        .advantages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .advantage-card {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .advantage-card h4 {
            color: white;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .advantage-card ul {
            list-style: none;
            padding-left: 0;
        }

        .advantage-card li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .advantage-card li:last-child {
            border-bottom: none;
        }

        .deployment-steps {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .deployment-steps ol {
            padding-left: 20px;
        }

        .deployment-steps li {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #3498db;
        }

        .command-block {
            background: #2c3e50;
            color: #ecf0f1;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
        }

        .navigation {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .navigation ul {
            list-style: none;
            padding: 0;
        }

        .navigation li {
            margin: 5px 0;
        }

        .navigation a {
            color: #3498db;
            text-decoration: none;
            font-size: 0.9em;
        }

        .navigation a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .advantages-grid {
                grid-template-columns: 1fr;
            }
            
            .navigation {
                position: static;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏗️ Infrastructure Finale Souhaitée</h1>
            <p>Application Bancaire SecureBank</p>
        </div>

        <div class="navigation">
            <h4>Navigation</h4>
            <ul>
                <li><a href="#vue-ensemble">Vue d'Ensemble</a></li>
                <li><a href="#architecture">Architecture</a></li>
                <li><a href="#vms">Machines Virtuelles</a></li>
                <li><a href="#docker">Services Docker</a></li>
                <li><a href="#securite">Sécurité</a></li>
                <li><a href="#flux">Flux de Données</a></li>
                <li><a href="#deploiement">Déploiement</a></li>
                <li><a href="#avantages">Avantages</a></li>
                <li><a href="#maintenance">Maintenance</a></li>
            </ul>
        </div>

        <div class="content">
            <div class="section" id="vue-ensemble">
                <h2>📋 Vue d'Ensemble</h2>
                <p>L'infrastructure finale souhaitée pour l'application bancaire SecureBank est une architecture sécurisée multi-niveaux utilisant la virtualisation et la conteneurisation pour garantir la sécurité, la disponibilité et la scalabilité.</p>
            </div>

            <div class="section" id="architecture">
                <h2>🏗️ Architecture Globale</h2>
                
                <h3>1.1 Topologie Réseau</h3>
                <div class="architecture-diagram">┌─────────────────────────────────────────────────────────────────────────────┐
│                           INFRASTRUCTURE FINALE                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐         │
│  │   NTP Server    │    │   PKI Server    │    │  SecureBank     │         │
│  │ 192.168.56.42   │    │ 192.168.56.41   │    │ 192.168.56.40   │         │
│  │                 │    │                 │    │                 │         │
│  │ • NTP Service   │    │ • CFSSL API     │    │ • HAProxy       │         │
│  │ • Time Sync     │    │ • Certificates  │    │ • SSL/TLS       │         │
│  │ • Security      │    │ • PKI Mgmt      │    │ • WAF Rules     │         │
│  │ • Logs          │    │ • Auto Renewal  │    │ • Load Balance  │         │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘         │
│           │                       │                       │                 │
│           └───────────────────────┼───────────────────────┘                 │
│                                   │                                         │
│  ┌─────────────────────────────────┼─────────────────────────────────────────┐
│  │                    RÉSEAU PRIVÉ VAGRANT (192.168.56.0/24)                │
│  └─────────────────────────────────┼─────────────────────────────────────────┘
│                                   │                                         │
│  ┌─────────────────────────────────┼─────────────────────────────────────────┐
│  │                        DOCKER COMPOSE STACK                              │
│  │                                                                           │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐     │
│  │  │ SecureBank  │  │  StoreAPI   │  │   SQL       │  │   MailDev   │     │
│  │  │   App       │  │             │  │  Server     │  │             │     │
│  │  │ Port: 1337  │  │ Port: 1338  │  │ Port: 1433  │  │ Port: 1080  │     │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘     │
│  │                                                                           │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐                      │
│  │  │ SQL Server  │  │ Replication │  │   Backup    │                      │
│  │  │ Secondary   │  │   Agent     │  │   Agent     │                      │
│  │  │ Port: 1434  │  │             │  │             │                      │
│  │  └─────────────┘  └─────────────┘  └─────────────┘                      │
│  └───────────────────────────────────────────────────────────────────────────┘
└─────────────────────────────────────────────────────────────────────────────┘</div>
            </div>

            <div class="section" id="vms">
                <h2>🖥️ Machines Virtuelles (Vagrant)</h2>
                
                <h3>2.1 NTP Server (192.168.56.42)</h3>
                <div class="service-card">
                    <h4>Rôle : Synchronisation temporelle sécurisée</h4>
                    <ul>
                        <li><strong>NTP Service</strong> : Synchronisation avec des serveurs NTP publics</li>
                        <li><strong>Time Sync</strong> : Maintien de l'heure précise pour tous les services</li>
                        <li><strong>Security</strong> : Configuration sécurisée du service NTP</li>
                        <li><strong>Logs</strong> : Journalisation des événements de synchronisation</li>
                    </ul>
                </div>
                
                <h4>Configuration :</h4>
                <div class="config-block">VM: ntp-server
IP: 192.168.56.42
OS: Ubuntu Bionic (18.04)
Playbook: ntp_main.yml</div>

                <h3>2.2 PKI Server (192.168.56.41)</h3>
                <div class="service-card">
                    <h4>Rôle : Infrastructure à clés publiques (PKI)</h4>
                    <ul>
                        <li><strong>CFSSL API</strong> : API REST pour la gestion des certificats</li>
                        <li><strong>Certificates</strong> : Génération et gestion des certificats SSL/TLS</li>
                        <li><strong>PKI Mgmt</strong> : Gestion de l'autorité de certification</li>
                        <li><strong>Auto Renewal</strong> : Renouvellement automatique des certificats</li>
                    </ul>
                </div>
                
                <h4>Configuration :</h4>
                <div class="config-block">VM: pki-server
IP: 192.168.56.41
OS: Ubuntu Bionic (18.04)
Playbook: pki_main.yml</div>

                <h3>2.3 SecureBank Web (192.168.56.40)</h3>
                <div class="service-card">
                    <h4>Rôle : Serveur web principal avec reverse proxy</h4>
                    <ul>
                        <li><strong>HAProxy</strong> : Reverse proxy et load balancer</li>
                        <li><strong>SSL/TLS</strong> : Termination SSL avec certificats CFSSL</li>
                        <li><strong>WAF Rules</strong> : Règles de pare-feu applicatif web</li>
                        <li><strong>Load Balance</strong> : Répartition de charge entre les services</li>
                    </ul>
                </div>
                
                <h4>Configuration :</h4>
                <div class="config-block">VM: securebank-web
IP: 192.168.56.40
OS: Ubuntu Bionic (18.04)
Playbook: main.yml</div>
            </div>

            <div class="section" id="docker">
                <h2>🐳 Services Conteneurisés (Docker)</h2>
                
                <h3>3.1 SecureBank Application</h3>
                <div class="service-card">
                    <h4>Rôle : Application bancaire principale</h4>
                    <ul>
                        <li>Interface utilisateur bancaire</li>
                        <li>Gestion des comptes et transactions</li>
                        <li>Authentification et autorisation</li>
                        <li>Intégration avec StoreAPI</li>
                    </ul>
                </div>
                
                <h4>Configuration :</h4>
                <div class="config-block">Service: securebank
Port: 1337:80
Dépendances: mssql, maildev, storeapi
Environnement: 
  - BaseUrl: https://securebank.com
  - StoreEndpoint: https://securebank.com/api/Store/
  - CTF: Enabled=false</div>

                <h3>3.2 StoreAPI</h3>
                <div class="service-card">
                    <h4>Rôle : API de gestion de la boutique</h4>
                    <ul>
                        <li>Gestion des produits</li>
                        <li>Historique des achats</li>
                        <li>API REST sécurisée</li>
                    </ul>
                </div>
                
                <h4>Configuration :</h4>
                <div class="config-block">Service: storeapi
Port: 1338:80
Dépendances: mssql
Environnement:
  - Database: store
  - Seed: true</div>

                <h3>3.3 SQL Server Primary</h3>
                <div class="service-card">
                    <h4>Rôle : Base de données principale</h4>
                    <ul>
                        <li>Base de données SecureBank</li>
                        <li>Base de données Store</li>
                        <li>Sauvegarde automatique</li>
                    </ul>
                </div>
                
                <h4>Configuration :</h4>
                <div class="config-block">Service: mssql
Port: 1433:1433
Image: mcr.microsoft.com/mssql/server
Environnement:
  - ACCEPT_EULA: y
  - SA_PASSWORD: Your_Password123</div>

                <h3>3.4 SQL Server Secondary</h3>
                <div class="service-card">
                    <h4>Rôle : Base de données secondaire (réplication)</h4>
                    <ul>
                        <li>Réplication des données</li>
                        <li>Haute disponibilité</li>
                        <li>Récupération après sinistre</li>
                    </ul>
                </div>
                
                <h4>Configuration :</h4>
                <div class="config-block">Service: mssql-secondary
Port: 1434:1433
Image: mcr.microsoft.com/mssql/server
Environnement:
  - ACCEPT_EULA: y
  - SA_PASSWORD: Your_Password123</div>

                <h3>3.5 Replication Agent</h3>
                <div class="service-card">
                    <h4>Rôle : Agent de réplication automatique</h4>
                    <ul>
                        <li>Sauvegarde automatique toutes les 30 secondes</li>
                        <li>Restauration sur le serveur secondaire</li>
                        <li>Monitoring de la réplication</li>
                    </ul>
                </div>
                
                <h4>Configuration :</h4>
                <div class="config-block">Service: replication-agent
Image: mcr.microsoft.com/mssql-tools
Dépendances: mssql, mssql-secondary</div>

                <h3>3.6 MailDev</h3>
                <div class="service-card">
                    <h4>Rôle : Serveur mail de développement</h4>
                    <ul>
                        <li>Interface web pour visualiser les emails</li>
                        <li>Serveur SMTP pour les tests</li>
                        <li>Capture des emails de l'application</li>
                    </ul>
                </div>
                
                <h4>Configuration :</h4>
                <div class="config-block">Service: maildev
Ports: 
  - 127.0.0.1:1080:80
  - 1025:25
Image: maildev/maildev:1.1.0</div>
            </div>

            <div class="section" id="securite">
                <h2>🔒 Sécurité</h2>
                
                <h3>4.1 Couches de Sécurité</h3>
                <ol>
                    <li><strong>Périmètre</strong> : HAProxy avec WAF</li>
                    <li><strong>Réseau</strong> : Réseau privé Vagrant</li>
                    <li><strong>Application</strong> : Authentification et autorisation</li>
                    <li><strong>Données</strong> : Chiffrement et réplication</li>
                </ol>

                <h3>4.2 Certificats SSL/TLS</h3>
                <ul>
                    <li><strong>Génération</strong> : CFSSL sur le serveur PKI</li>
                    <li><strong>Renouvellement</strong> : Automatique via scripts cron</li>
                    <li><strong>Distribution</strong> : HAProxy pour la termination SSL</li>
                </ul>

                <h3>4.3 Monitoring et Logs</h3>
                <ul>
                    <li><strong>Logs d'accès</strong> : HAProxy</li>
                    <li><strong>Logs applicatifs</strong> : SecureBank et StoreAPI</li>
                    <li><strong>Logs de base de données</strong> : SQL Server</li>
                    <li><strong>Logs de réplication</strong> : Agent de réplication</li>
                </ul>
            </div>

            <div class="section" id="flux">
                <h2>📊 Flux de Données</h2>
                
                <h3>5.1 Flux d'Authentification</h3>
                <div class="flow-diagram">Client → HAProxy (SSL/TLS) → SecureBank → SQL Server
   ↓           ↓                ↓            ↓
Validation → Headers Sec → Session Mgmt → Encryption</div>

                <h3>5.2 Flux de Transactions</h3>
                <div class="flow-diagram">Client → HAProxy → SecureBank → StoreAPI → SQL Server
   ↓        ↓          ↓           ↓           ↓
HTTPS → WAF → Auth → Validation → Audit → Backup</div>

                <h3>5.3 Flux de Réplication</h3>
                <div class="flow-diagram">SQL Primary → Backup → Replication Agent → SQL Secondary
     ↓           ↓            ↓               ↓
   Data → .bak files → Restore → Synchronized</div>
            </div>

            <div class="section" id="deploiement">
                <h2>🚀 Déploiement</h2>
                
                <h3>6.1 Étapes de Déploiement</h3>
                <div class="deployment-steps">
                    <ol>
                        <li><strong>Préparation</strong> : Installation des prérequis</li>
                        <li><strong>Infrastructure</strong> : Déploiement des VMs avec Vagrant</li>
                        <li><strong>Services</strong> : Configuration des services avec Ansible</li>
                        <li><strong>Applications</strong> : Déploiement des conteneurs Docker</li>
                        <li><strong>Validation</strong> : Tests de sécurité et de performance</li>
                    </ol>
                </div>

                <h3>6.2 Commandes de Déploiement</h3>
                <div class="command-block"># Déploiement complet
cd vagrant
vagrant up

# Vérification
vagrant status
vagrant ssh securebank-web
docker ps</div>
            </div>

            <div class="section" id="avantages">
                <h2>📈 Avantages de cette Architecture</h2>
                
                <div class="advantages-grid">
                    <div class="advantage-card">
                        <h4>🔒 Sécurité</h4>
                        <ul>
                            <li><strong>Isolation</strong> : VMs séparées pour chaque rôle critique</li>
                            <li><strong>Chiffrement</strong> : SSL/TLS end-to-end</li>
                            <li><strong>Monitoring</strong> : Logs centralisés et alertes</li>
                            <li><strong>Réplication</strong> : Protection contre la perte de données</li>
                        </ul>
                    </div>
                    
                    <div class="advantage-card">
                        <h4>📈 Scalabilité</h4>
                        <ul>
                            <li><strong>Conteneurs</strong> : Déploiement rapide et reproductible</li>
                            <li><strong>Load Balancing</strong> : HAProxy pour la répartition de charge</li>
                            <li><strong>Microservices</strong> : Architecture modulaire</li>
                        </ul>
                    </div>
                    
                    <div class="advantage-card">
                        <h4>🔧 Maintenabilité</h4>
                        <ul>
                            <li><strong>Infrastructure as Code</strong> : Vagrant et Ansible</li>
                            <li><strong>Configuration centralisée</strong> : Variables d'environnement</li>
                            <li><strong>Documentation</strong> : Procédures détaillées</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="section" id="maintenance">
                <h2>🔧 Maintenance</h2>
                
                <h3>8.1 Sauvegardes</h3>
                <ul>
                    <li><strong>Automatiques</strong> : Toutes les 30 secondes</li>
                    <li><strong>Stockage</strong> : Volume Docker persistant</li>
                    <li><strong>Récupération</strong> : Procédures documentées</li>
                </ul>

                <h3>8.2 Monitoring</h3>
                <ul>
                    <li><strong>Services</strong> : Statut des conteneurs et VMs</li>
                    <li><strong>Performance</strong> : Métriques de charge</li>
                    <li><strong>Sécurité</strong> : Alertes sur les événements suspects</li>
                </ul>

                <h3>8.3 Mises à Jour</h3>
                <ul>
                    <li><strong>Applications</strong> : Nouveaux builds Docker</li>
                    <li><strong>Infrastructure</strong> : Playbooks Ansible</li>
                    <li><strong>Sécurité</strong> : Renouvellement des certificats</li>
                </ul>
            </div>
        </div>

        <div class="footer">
            <p><strong>Cette infrastructure finale représente une solution bancaire sécurisée, scalable et maintenable, adaptée aux exigences modernes de sécurité informatique.</strong></p>
            <p>Projet réalisé dans le cadre d'un cours de sécurité informatique</p>
            <p>Technologies : ASP.NET Core, Docker, Vagrant, Ansible, HAProxy, CFSSL</p>
        </div>
    </div>
</body>
</html> 